# Landscape - Linux Router Configuration Tool

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-green.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![DeepWiki](https://img.shields.io/badge/DeepWiki-ThisSeanZhang%2Flandscape-blue.svg?logo=data\:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==)](https://deepwiki.com/ThisSeanZhang/landscape)

<!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->

Landscape is a web-based tool that helps you easily configure your favorite Linux distribution as a router.

> Built with Rust / eBPF / AF_PACKET.

[简体中文](./README.zh.md) | [English](./README.md)

## Screenshot
![](docs/images/1.png)

---

## Features

> ✅ Implemented and tested
> ⚠ Functional but untested
> ❌ Not implemented

* <u>IP Configuration</u>

  * *Static IP Configuration*

    * ✅ Assign IP address
    * ✅ Set default gateway route
  * *DHCP Client*

    * ✅ Set hostname
    * ❌ Custom options
  * *PPPoE (PPPD version)*

    * ✅ Set as default route
    * ⚠ Multi-NIC dialing
    * ✅ Specify network interface
  * *PPPoE (eBPF version)*

    * ✅ Protocol core implemented
    * ❌ GRO/GSO causes packet size to exceed MTU (unsolved)
  * *DHCP Server*

    * ✅ Basic IP lease and renewal
    * ✅ Custom IP range/gateway/access configuration
    * ✅ MAC-to-IP binding
    * ✅ IP allocation display
  * *IPv6 Support*

    * ✅ Request prefix via DHCPv6-PD
    * ✅ Advertise prefix using RA to downstream devices
* <u>Traffic Control Module</u>

  * ✅ Identify flows using IP + QoS
  * ✅ Each flow can have its own DNS and cache
  * ✅ Forward marked traffic by policy (direct/drop/reuse port/redirect to Docker or NIC)
  * ❌ Mark flows for tracking
  * ✅ Control external IP behavior with GeoIP-based rules
  * ✅ Choose whether to override DNS behavior for external IP rules
  * ❌ Auto-update GeoIP file
* <u>DNS</u>

  * ✅ DNS over HTTPS and TLS to upstream
  * ✅ Custom upstream DNS per domain
  * ✅ DNS hijacking (A record response)
  * ❌ DNS hijack returns multiple records (non-A)
  * ✅ Mark IPs from specific DNS responses for further processing
  * ✅ GeoSite file support
  * ❌ Auto-update GeoSite file
  * ❌ Add Docker image names to DNS cache
* <u>NAT (eBPF-based)</u>

  * ✅ Basic NAT
  * ⚠ Static mapping / open ports (UI not finished)
  * ✅ NAT disables port reuse by default, can be dynamically enabled via flow marking
* <u>Metrics Module</u>

  * ✅ Report connection stats (bytes/packets) every 5 seconds
  * ✅ Display current connections (not yet integrated with NAT info)
  * ❌ Export metrics via API
* <u>Docker</u>

  * ✅ Manage and run basic Docker containers
  * ⚠ Image pulling
  * ✅ Redirect traffic to TProxy-enabled Docker container
* <u>WiFi</u>

  * ✅ Switch wireless interface state via `iw`
  * ✅ Create WiFi hotspot via `hostapd`
  * ❌ Connect to WiFi hotspot
* <u>Storage</u>

  * ❌ Use database to replace current config storage
  * ❌ Specify separate database for metrics
* <u>Miscellaneous</u>

  * ✅ Login page
  * ❌ English version of front-end
  * ❌ Optimize NIC XPS/RSP to distribute load across CPU cores

---

## How to Start & Limitations

### System Requirements

* Supported Linux Kernel: `6.1` or later
* Install `iptables` (for MSS clamping in PPPD version), `docker`

### General Startup Steps

1. Create config directory:

   ```bash
   mkdir -p ~/.landscape-router
   ```

2. Download `static.zip` from [Releases](https://github.com/ThisSeanZhang/landscape/releases), and extract it to `~/.landscape-router/static`.

3. If you're using a desktop environment with a browser, you can skip this.
   Otherwise, create an initial config file `landscape_init.toml` based on [Quick Start Guide](https://landscape.whileaway.dev/quick.html).

4. Download the appropriate binary from [Releases](https://github.com/ThisSeanZhang/landscape/releases), then run with root:

   ```bash
   ./landscape-webserver
   ```

   Default port: `6300`, username: `root`, password: `root`.
   Use `./landscape-webserver --help` for more options.

### Docker Compose

Refer to [Quick Start](https://landscape.whileaway.dev/quick.html)

### Armbian Integration

See [Armbian Guide](https://landscape.whileaway.dev/compilation/armbian.html)

---

## Building from Source

Refer to the [Build Guide](https://landscape.whileaway.dev/compilation/) or [Cross Compilation](https://landscape.whileaway.dev/compilation/cross.html)

## License

* `landscape-ebpf`: [GNU General Public License v2.0](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html)
* Other components: [GNU General Public License v3.0](https://www.gnu.org/licenses/gpl-3.0.html)

---

If you have any suggestions or issues, feel free to submit them via [issues](./issues/new).
